"use strict";var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var Calendar=function(){function a(b,c,d,f,g){_classCallCheck(this,a),this.id=b,this.size=c,this.labelSettings=d,this.colors=f,this.initday=0,g=g||{},this.indicator=!0,void 0!=g.indicator&&(this.indicator=g.indicator);var k=document.createElement("LI");k.className="list-placeholder",k.appendChild(document.createTextNode("No events on this day")),this.placeholder=k.outerHTML,void 0!=g.placeholder&&(this.placeholder=g.placeholder);var l=["January","February","March","April","May","June","July","August","September","October","November","December"];void 0!=g.months&&12==g.months.length&&(l=g.months);var m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];void 0!=g.days&&7==g.days.length&&(m=g.days),this.months=l,this.label=[],this.labels=[];for(var h=0;7>h;h++)this.label.push(m[m.indexOf(d[0])+this.label.length>=m.length?Math.abs(m.length-(m.indexOf(d[0])+this.label.length)):m.indexOf(d[0])+this.label.length]);for(var h=0;7>h;h++)this.labels.push(this.label[h].substring(0,3<d[1]?3:d[1]));this.date=new Date,this.today=new Date,this.draw(),this.update(),this.setOnClickListener("days-blocks"),this.setOnClickListener("month-slider"),this.setOnClickListener("year-slider")}return _createClass(a,[{key:"draw",value:function draw(){var g="<svg style=\"width: 24px; height: 24px;\" viewBox=\"0 0 24 24\"><path fill=\""+this.colors[3]+"\" d=\"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z\"></path></svg>",h="<svg style=\"width: 24px; height: 24px;\" viewBox=\"0 0 24 24\"><path fill=\""+this.colors[3]+"\" d=\"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z\"></path></svg>",k=document.createElement("DIV");k.className="calendar "+this.size,document.getElementById(this.id).appendChild(k.cloneNode(!0));for(var l=[],m=["year","month","labels","days"],b=0;b<m.length;b++)if(l[b]=document.createElement("DIV"),l[b].className=m[b],"days"!=m[b])if("month"==m[b]){l[b].style.backgroundColor=this.colors[0],l[b].style.color=this.colors[2];var c=document.createElement("DIV");c.id=this.id+"-month-back",c.insertAdjacentHTML("beforeend",g),l[b].appendChild(c.cloneNode(!0));var d=document.createElement("SPAN");d.id=this.id+"-"+m[b],l[b].appendChild(d.cloneNode(!0));var f=document.createElement("DIV");f.id=this.id+"-month-next",f.insertAdjacentHTML("beforeend",h),l[b].appendChild(f.cloneNode(!0))}else if(l[b].style.backgroundColor=this.colors[1],l[b].style.color=this.colors[3],"labels"!=m[b]){var c=document.createElement("DIV");c.id=this.id+"-year-back",c.insertAdjacentHTML("beforeend",g),l[b].appendChild(c.cloneNode(!0));var d=document.createElement("SPAN");d.id=this.id+"-"+m[b],l[b].appendChild(d.cloneNode(!0));var f=document.createElement("DIV");f.id=this.id+"-year-next",f.insertAdjacentHTML("beforeend",h),l[b].appendChild(f.cloneNode(!0))}for(var n,b=0;b<this.labels.length;b++)n=document.createElement("SPAN"),n.id=this.id+"-label-"+(b+1),n.appendChild(document.createTextNode(this.labels[b]).cloneNode(!0)),l[2].appendChild(n.cloneNode(!0));for(var o=[],p=[],q=[],b=0;6>b;b++)o[b]=document.createElement("DIV"),o[b].className="row";for(var r=0,s=0;42>r;r++){q[r]=document.createElement("INPUT"),q[r].className="day-radios",q[r].type="radio",q[r].name=this.id+"-day-radios",q[r].id=this.id+"-day-radio-"+(r+1),p[r]=document.createElement("LABEL"),p[r].className="day",p[r].htmlFor=this.id+"-day-radio-"+(r+1),p[r].id=this.id+"-day-"+(r+1);var d=document.createElement("SPAN");d.id=this.id+"-day-num-"+(r+1),p[r].appendChild(d.cloneNode(!0)),o[s].appendChild(q[r].cloneNode(!0)),o[s].appendChild(p[r].cloneNode(!0)),0==(r+1)%7&&s++}for(var b=0;6>b;b++)l[3].appendChild(o[b].cloneNode(!0));for(var b=0;b<l.length;b++)k.appendChild(l[b].cloneNode(!0));document.getElementById(this.id).innerHTML="<style>.day.active::before { background-color: "+this.colors[1]+"; } .day.today > span { border-color: "+this.colors[1]+" !important; }</style>",document.getElementById(this.id).appendChild(k.cloneNode(!0))}},{key:"update",value:function update(){document.getElementById(this.id+"-year").innerHTML=this.date.getFullYear(),document.getElementById(this.id+"-month").innerHTML=this.months[this.date.getMonth()];for(var b=1;42>=b;b++)document.getElementById(this.id+"-day-num-"+b).innerHTML="",document.getElementById(this.id+"-day-"+b).className=this.id+" day listed";var d=new Date(this.date.getFullYear(),this.date.getMonth(),1).getDay(),f=new Date(11<this.date.getMonth()+1?this.date.getFullYear()+1:this.date.getFullYear(),12<this.date.getMonth()+1?0:this.date.getMonth()+1,0).getDate(),g=new Date(0>this.date.getMonth()?this.date.getFullYear()-1:this.date.getFullYear(),0>this.date.getMonth()?11:this.date.getMonth(),0).getDate();this.initday=this.label.indexOf(this.label[d]);for(var b=0,c=g;b<this.label.indexOf(this.label[d]);b++,c--)document.getElementById(this.id+"-day-num-"+(this.label.indexOf(this.label[d])-b)).innerHTML=c,document.getElementById(this.id+"-day-"+(this.label.indexOf(this.label[d])-b)).className=this.id+" day diluted";for(var b=1;b<=f;b++)document.getElementById(this.id+"-day-num-"+(this.label.indexOf(this.label[d])+b)).innerHTML=b,b==this.date.getDate()&&(document.getElementById(this.id+"-day-radio-"+(this.label.indexOf(this.label[d])+b)).checked=!0),this.date.getMonth()==this.today.getMonth()&&b==this.today.getDate()&&(document.getElementById(this.id+"-day-"+(this.label.indexOf(this.label[d])+b)).className+=" today");for(var b=f+1,c=1;42>=this.label.indexOf(this.label[d])+b;b++,c++)document.getElementById(this.id+"-day-num-"+(this.label.indexOf(this.label[d])+b)).innerHTML=c,document.getElementById(this.id+"-day-"+(this.label.indexOf(this.label[d])+b)).className=this.id+" day diluted"}},{key:"setupBlock",value:function setupBlock(b,c,d){document.getElementById(c.id+"-day-"+b).onclick=function(){0<document.getElementById(c.id+"-day-num-"+b).innerHTML.length&&(c.changeDateTo(document.getElementById(c.id+"-day-num-"+b).innerHTML,b),d())}}},{key:"setOnClickListener",value:function setOnClickListener(b,c,d){var f=this.id;c=c||function(){},d=d||function(){};var g=this;switch(b){case"days-blocks":for(var h=1;42>=h;h++)g.setupBlock(h,g,c);break;case"month-slider":document.getElementById(f+"-month-back").onclick=function(){g.back("month"),c()},document.getElementById(f+"-month-next").onclick=function(){g.next("month"),d()};break;case"year-slider":document.getElementById(f+"-year-back").onclick=function(){g.back("year"),c()},document.getElementById(f+"-year-next").onclick=function(){g.next("year"),d()};}}}]),a}();Calendar.prototype={constructor:Calendar,back:function(b){var c=this.date,d=new Date(11<c.getMonth()+1?c.getFullYear()+1:c.getFullYear(),12<c.getMonth()+1?0:c.getMonth()+1,0).getDate(),f=new Date(0>c.getMonth()?c.getFullYear()-1:c.getFullYear(),0>c.getMonth()?11:c.getMonth(),0).getDate();"month"==b?(c.getDate()>f&&this.changeDateTo(f),0<c.getMonth()?c.setMonth(c.getMonth()-1):(c.setMonth(11),c.setFullYear(c.getFullYear()-1))):"year"==b&&c.setFullYear(c.getFullYear()-1),this.update()},next:function(b){var c=this.date,d=new Date(11<c.getMonth()+1?c.getFullYear()+1:c.getFullYear(),12<c.getMonth()+1?0:c.getMonth()+1,0).getDate(),f=new Date(11<c.getMonth()+2?c.getFullYear()+1:c.getFullYear(),12<c.getMonth()+2?0:c.getMonth()+2,0).getDate();"month"==b?(c.getDate()>f&&this.changeDateTo(f),11==c.getMonth()?(c.setMonth(0),c.setFullYear(c.getFullYear()+1)):c.setMonth(c.getMonth()+1)):c.setFullYear(c.getFullYear()+1),this.update()},changeDateTo:function(b,c){if(31<=c&&11>=b||6>=c&&8<=b){31<=c&&11>=b?this.next("month"):6>=c&&8<=b&&this.back("month"),this.date.setDate(b);var d=this;return setTimeout(function(){d.update()},1),!0}this.date.setDate(b)}};var Organizer=function(){function a(b,c,d){_classCallCheck(this,a),this.id=b,this.calendar=c,this.data=d||{},this.draw();var f=this;f.onMonthChange(function(){f.indicateEvents()}),this.setOnClickListener("days-blocks"),this.setOnClickListener("day-slider"),this.setOnClickListener("month-slider"),this.setOnClickListener("year-slider")}return _createClass(a,[{key:"draw",value:function draw(){var b="<svg style=\"width: 24px; height: 24px;\" viewBox=\"0 0 24 24\"><path fill=\""+this.calendar.colors[3]+"\" d=\"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z\"></path></svg>",c="<svg style=\"width: 24px; height: 24px;\" viewBox=\"0 0 24 24\"><path fill=\""+this.calendar.colors[3]+"\" d=\"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z\"></path></svg>",d=document.createElement("DIV");d.className="events "+this.calendar.size;var f=document.createElement("DIV");f.className="date",f.style.backgroundColor=this.calendar.colors[1],f.style.color=this.calendar.colors[3];var g=document.createElement("DIV");g.id=this.id+"-day-back",g.insertAdjacentHTML("beforeend",b),f.appendChild(g.cloneNode(!0));var h=document.createElement("SPAN");h.id=this.id+"-date",f.appendChild(h.cloneNode(!0));var k=document.createElement("DIV");k.id=this.id+"-day-next",k.insertAdjacentHTML("beforeend",c),f.appendChild(k.cloneNode(!0));var l=document.createElement("DIV");l.className="rows";var m=document.createElement("OL");m.className="list",m.id=this.id+"-list",l.appendChild(m.cloneNode(!0)),d.appendChild(f.cloneNode(!0)),d.appendChild(l.cloneNode(!0)),document.getElementById(this.id).appendChild(d.cloneNode(!0))}},{key:"update",value:function update(){document.getElementById(this.id+"-date").innerHTML=this.calendar.months[this.calendar.date.getMonth()]+" "+this.calendar.date.getDate()+", "+this.calendar.date.getFullYear(),document.getElementById(this.id+"-list").innerHTML="",this.showEvents()}},{key:"list",value:function list(b){document.getElementById(this.id+"-list").innerHTML="";for(var f,c=document.createElement("UL"),d=0;d<b.length;d++){f=document.createElement("LI"),f.id=this.id+"-list-item-"+d;var g=document.createElement("DIV"),h=document.createElement("SPAN");h.id=this.id+"-list-item-"+d+"-time",h.class=this.id+" time",h.appendChild(document.createTextNode(b[d].startTime+" - "+b[d].endTime)),g.appendChild(h);var k=document.createElement("P");k.id=this.id+"-list-item-"+d+"-text",k.appendChild(document.createTextNode(b[d].text)),f.appendChild(g),f.appendChild(k),c.appendChild(f)}document.getElementById(this.id+"-list").innerHTML=c.innerHTML,0==b.length&&this.showPlaceholder()}},{key:"setupBlock",value:function setupBlock(b,c,d){var f=c.calendar;document.getElementById(f.id+"-day-"+b).onclick=function(){0<document.getElementById(f.id+"-day-num-"+b).innerHTML.length&&(c.changeDateTo(document.getElementById(f.id+"-day-num-"+b).innerHTML,b),d())}}},{key:"showEvents",value:function showEvents(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.data,c=this.calendar.date;try{this.list(b[c.getFullYear()][c.getMonth()+1][c.getDate()])}catch(d){this.showPlaceholder()}}},{key:"showPlaceholder",value:function showPlaceholder(){document.getElementById(this.id+"-list").innerHTML=this.calendar.placeholder}},{key:"indicateEvents",value:function indicateEvents(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.data,c=this.calendar.date;if(this.calendar.indicator){var d=document.getElementsByClassName(this.calendar.id+" day listed");try{var f=b[c.getFullYear()][c.getMonth()+1];for(var g in f)0<f[g].length&&(d[g-1].className+=" active")}catch(h){}}this.update()}},{key:"onMonthChange",value:function onMonthChange(b){b()}},{key:"setOnClickListener",value:function setOnClickListener(b,c,d){var f=this.calendar.id,g=this.id;c=c||function(){},d=d||function(){};var h=this;switch(b){case"days-blocks":for(var k=1;42>=k;k++)h.setupBlock(k,h,c);break;case"day-slider":document.getElementById(g+"-day-back").onclick=function(){h.back("day"),c()},document.getElementById(g+"-day-next").onclick=function(){h.next("day"),d()};break;case"month-slider":document.getElementById(f+"-month-back").onclick=function(){h.back("month"),c()},document.getElementById(f+"-month-next").onclick=function(){h.next("month"),d()};break;case"year-slider":document.getElementById(f+"-year-back").onclick=function(){h.back("year"),c()},document.getElementById(f+"-year-next").onclick=function(){h.next("year"),d()};}}}]),a}();Organizer.prototype={constructor:Organizer,back:function(b){var d=this.calendar.date,f=new Date(11<d.getMonth()+1?d.getFullYear()+1:d.getFullYear(),12<d.getMonth()+1?0:d.getMonth()+1,0).getDate(),g=new Date(0>d.getMonth()?d.getFullYear()-1:d.getFullYear(),0>d.getMonth()?11:d.getMonth(),0).getDate();if("day"==b){if(1!=d.getDate())this.changeDateTo(d.getDate()-1),this.update();else{this.calendar.back("month"),this.changeDateTo(f);var c=this;c.onMonthChange(function(){c.indicateEvents()})}document.getElementById(this.calendar.id+"-day-radio-"+(this.calendar.initday+d.getDate())).checked=!0}else{this.calendar.back(b);var c=this;c.onMonthChange(function(){c.indicateEvents()})}},next:function(b){var d=this.calendar.date,f=new Date(11<d.getMonth()+1?d.getFullYear()+1:d.getFullYear(),12<d.getMonth()+1?0:d.getMonth()+1,0).getDate(),g=new Date(11<d.getMonth()+2?d.getFullYear()+1:d.getFullYear(),12<d.getMonth()+2?0:d.getMonth()+2,0).getDate();if("day"==b){if(d.getDate()!=f)d.setDate(d.getDate()+1),this.update();else{this.calendar.next("month"),d.setDate(1);var c=this;c.onMonthChange(function(){c.indicateEvents()})}document.getElementById(this.calendar.id+"-day-radio-"+(this.calendar.initday+d.getDate())).checked=!0}else{this.calendar.next(b);var c=this;c.onMonthChange(function(){c.indicateEvents()})}},changeDateTo:function(b,c){var d=this.calendar.changeDateTo(b,c),f=this;setTimeout(function(){d?f.onMonthChange(function(){f.indicateEvents()}):f.update()},1)}};
