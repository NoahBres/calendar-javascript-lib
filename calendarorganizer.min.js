var Calendar=function(e,t,n,a,i){for(this.id=e,this.size=t,this.labelSettings=n,this.colors=a,this.initday=0,i=i||{},this.indicator=!0,null!=i.indicator&&(this.indicator=i.indicator),(e=document.createElement("LI")).className="list-placeholder",e.appendChild(document.createTextNode("No events on this day")),this.placeholder=e.outerHTML,null!=i.placeholder&&(this.placeholder=i.placeholder),t="January February March April May June July August September October November December".split(" "),null!=i.months&&12==i.months.length&&(t=i.months),e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),null!=i.days&&7==i.days.length&&(e=i.days),this.months=t,this.label=[],this.labels=[],i=0;7>i;i++)this.label.push(e[e.indexOf(n[0])+this.label.length>=e.length?Math.abs(e.length-(e.indexOf(n[0])+this.label.length)):e.indexOf(n[0])+this.label.length]);for(i=0;7>i;i++)this.labels.push(this.label[i].substring(0,3<n[1]?3:n[1]));this.date=new Date,this.today=new Date,this.draw(),this.update(),this.setOnClickListener("days-blocks"),this.setOnClickListener("month-slider"),this.setOnClickListener("year-slider")};Calendar.prototype.draw=function(){var e='<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="'+this.colors[3]+'" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"></path></svg>',t='<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="'+this.colors[3]+'" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"></path></svg>',n=document.createElement("DIV");n.className="calendar "+this.size,document.getElementById(this.id).appendChild(n.cloneNode(!0));for(var a=[],i=["year","month","labels","days"],d=0;d<i.length;d++){var l;a[d]=document.createElement("DIV"),a[d].className=i[d],"days"!=i[d]&&("month"!=i[d]?(a[d].style.backgroundColor=this.colors[1],a[d].style.color=this.colors[3],"labels"!=i[d]&&((l=document.createElement("DIV")).id=this.id+"-year-back",l.insertAdjacentHTML("beforeend",e),a[d].appendChild(l.cloneNode(!0)),(l=document.createElement("SPAN")).id=this.id+"-"+i[d],a[d].appendChild(l.cloneNode(!0)),(l=document.createElement("DIV")).id=this.id+"-year-next",l.insertAdjacentHTML("beforeend",t),a[d].appendChild(l.cloneNode(!0)))):(a[d].style.backgroundColor=this.colors[0],a[d].style.color=this.colors[2],(l=document.createElement("DIV")).id=this.id+"-month-back",l.insertAdjacentHTML("beforeend",e),a[d].appendChild(l.cloneNode(!0)),(l=document.createElement("SPAN")).id=this.id+"-"+i[d],a[d].appendChild(l.cloneNode(!0)),(l=document.createElement("DIV")).id=this.id+"-month-next",l.insertAdjacentHTML("beforeend",t),a[d].appendChild(l.cloneNode(!0))))}for(d=0;d<this.labels.length;d++)(t=document.createElement("SPAN")).id=this.id+"-label-"+(d+1),t.appendChild(document.createTextNode(this.labels[d]).cloneNode(!0)),a[2].appendChild(t.cloneNode(!0));e=[],i=[];var o=[];for(d=0;6>d;d++)e[d]=document.createElement("DIV"),e[d].className="row";for(t=d=0;42>d;d++)o[d]=document.createElement("INPUT"),o[d].className="day-radios",o[d].type="radio",o[d].name=this.id+"-day-radios",o[d].id=this.id+"-day-radio-"+(d+1),i[d]=document.createElement("LABEL"),i[d].className="day",i[d].htmlFor=this.id+"-day-radio-"+(d+1),i[d].id=this.id+"-day-"+(d+1),(l=document.createElement("SPAN")).id=this.id+"-day-num-"+(d+1),i[d].appendChild(l.cloneNode(!0)),e[t].appendChild(o[d].cloneNode(!0)),e[t].appendChild(i[d].cloneNode(!0)),0==(d+1)%7&&t++;for(d=0;6>d;d++)a[3].appendChild(e[d].cloneNode(!0));for(d=0;d<a.length;d++)n.appendChild(a[d].cloneNode(!0));document.getElementById(this.id).innerHTML="<style>.day.active::before { background-color: "+this.colors[1]+"; } .day.today > span { border-color: "+this.colors[1]+" !important; }</style>",document.getElementById(this.id).appendChild(n.cloneNode(!0))},Calendar.prototype.update=function(){document.getElementById(this.id+"-year").innerHTML=this.date.getFullYear(),document.getElementById(this.id+"-month").innerHTML=this.months[this.date.getMonth()];for(var e=1;42>=e;e++)document.getElementById(this.id+"-day-num-"+e).innerHTML="",document.getElementById(this.id+"-day-"+e).className=this.id+" day listed";var t=new Date(this.date.getFullYear(),this.date.getMonth(),1).getDay(),n=new Date(11<this.date.getMonth()+1?this.date.getFullYear()+1:this.date.getFullYear(),12<this.date.getMonth()+1?0:this.date.getMonth()+1,0).getDate(),a=new Date(0>this.date.getMonth()?this.date.getFullYear()-1:this.date.getFullYear(),0>this.date.getMonth()?11:this.date.getMonth(),0).getDate();for(this.initday=this.label.indexOf(this.label[t]),e=0;e<this.label.indexOf(this.label[t]);e++,a--)document.getElementById(this.id+"-day-num-"+(this.label.indexOf(this.label[t])-e)).innerHTML=a,document.getElementById(this.id+"-day-"+(this.label.indexOf(this.label[t])-e)).className=this.id+" day diluted";for(e=1;e<=n;e++)document.getElementById(this.id+"-day-num-"+(this.label.indexOf(this.label[t])+e)).innerHTML=e,e==this.date.getDate()&&(document.getElementById(this.id+"-day-radio-"+(this.label.indexOf(this.label[t])+e)).checked=!0),this.date.getMonth()==this.today.getMonth()&&e==this.today.getDate()&&(document.getElementById(this.id+"-day-"+(this.label.indexOf(this.label[t])+e)).className+=" today");for(e=n+1,a=1;42>=this.label.indexOf(this.label[t])+e;e++,a++)document.getElementById(this.id+"-day-num-"+(this.label.indexOf(this.label[t])+e)).innerHTML=a,document.getElementById(this.id+"-day-"+(this.label.indexOf(this.label[t])+e)).className=this.id+" day diluted"},Calendar.prototype.setupBlock=function(e,t,n){document.getElementById(t.id+"-day-"+e).onclick=function(){0<document.getElementById(t.id+"-day-num-"+e).innerHTML.length&&(t.changeDateTo(document.getElementById(t.id+"-day-num-"+e).innerHTML,e),n())}},Calendar.prototype.setOnClickListener=function(e,t,n){var a=this.id;t=t||function(){},n=n||function(){};var i=this;switch(e){case"days-blocks":for(e=1;42>=e;e++)i.setupBlock(e,i,t);break;case"month-slider":document.getElementById(a+"-month-back").onclick=function(){i.back("month"),t()},document.getElementById(a+"-month-next").onclick=function(){i.next("month"),n()};break;case"year-slider":document.getElementById(a+"-year-back").onclick=function(){i.back("year"),t()},document.getElementById(a+"-year-next").onclick=function(){i.next("year"),n()}}},Calendar.prototype={constructor:Calendar,back:function(e){var t=this.date,n=(new Date(11<t.getMonth()+1?t.getFullYear()+1:t.getFullYear(),12<t.getMonth()+1?0:t.getMonth()+1,0).getDate(),new Date(0>t.getMonth()?t.getFullYear()-1:t.getFullYear(),0>t.getMonth()?11:t.getMonth(),0).getDate());"month"==e?(t.getDate()>n&&this.changeDateTo(n),0<t.getMonth()?t.setMonth(t.getMonth()-1):(t.setMonth(11),t.setFullYear(t.getFullYear()-1))):"year"==e&&t.setFullYear(t.getFullYear()-1),this.update()},next:function(e){var t=this.date,n=(new Date(11<t.getMonth()+1?t.getFullYear()+1:t.getFullYear(),12<t.getMonth()+1?0:t.getMonth()+1,0).getDate(),new Date(11<t.getMonth()+2?t.getFullYear()+1:t.getFullYear(),12<t.getMonth()+2?0:t.getMonth()+2,0).getDate());"month"==e?(t.getDate()>n&&this.changeDateTo(n),11!=t.getMonth()?t.setMonth(t.getMonth()+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))):t.setFullYear(t.getFullYear()+1),this.update()},changeDateTo:function(e,t){if(31<=t&&11>=e||6>=t&&8<=e){31<=t&&11>=e?this.next("month"):6>=t&&8<=e&&this.back("month"),this.date.setDate(e);var n=this;return setTimeout(function(){n.update()},1),!0}this.date.setDate(e)}};var Organizer=function(e,t,n){this.id=e,this.calendar=t,this.data=n||{},this.draw();var a=this;a.onMonthChange(function(){a.indicateEvents()}),this.setOnClickListener("days-blocks"),this.setOnClickListener("day-slider"),this.setOnClickListener("month-slider"),this.setOnClickListener("year-slider")};Organizer.prototype.draw=function(){var e='<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="'+this.calendar.colors[3]+'" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"></path></svg>',t='<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="'+this.calendar.colors[3]+'" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"></path></svg>',n=document.createElement("DIV");n.className="events "+this.calendar.size;var a=document.createElement("DIV");a.className="date",a.style.backgroundColor=this.calendar.colors[1],a.style.color=this.calendar.colors[3];var i=document.createElement("DIV");i.id=this.id+"-day-back",i.insertAdjacentHTML("beforeend",e),a.appendChild(i.cloneNode(!0)),(e=document.createElement("SPAN")).id=this.id+"-date",a.appendChild(e.cloneNode(!0)),(e=document.createElement("DIV")).id=this.id+"-day-next",e.insertAdjacentHTML("beforeend",t),a.appendChild(e.cloneNode(!0)),(t=document.createElement("DIV")).className="rows",(e=document.createElement("OL")).className="list",e.id=this.id+"-list",t.appendChild(e.cloneNode(!0)),n.appendChild(a.cloneNode(!0)),n.appendChild(t.cloneNode(!0)),document.getElementById(this.id).appendChild(n.cloneNode(!0))},Organizer.prototype.update=function(){document.getElementById(this.id+"-date").innerHTML=this.calendar.months[this.calendar.date.getMonth()]+" "+this.calendar.date.getDate()+", "+this.calendar.date.getFullYear(),document.getElementById(this.id+"-list").innerHTML="",this.showEvents()},Organizer.prototype.list=function(e){document.getElementById(this.id+"-list").innerHTML="";for(var t=document.createElement("UL"),n=0;n<e.length;n++){var a=document.createElement("LI");a.id=this.id+"-list-item-"+n;var i=document.createElement("DIV"),d=document.createElement("SPAN");d.id=this.id+"-list-item-"+n+"-time",d.class=this.id+" time",d.appendChild(document.createTextNode(e[n].startTime+" - "+e[n].endTime)),i.appendChild(d),(d=document.createElement("P")).id=this.id+"-list-item-"+n+"-text",d.appendChild(document.createTextNode(e[n].text)),a.appendChild(i),a.appendChild(d),t.appendChild(a)}document.getElementById(this.id+"-list").innerHTML=t.innerHTML,0==e.length&&this.showPlaceholder()},Organizer.prototype.setupBlock=function(e,t,n){var a=t.calendar;document.getElementById(a.id+"-day-"+e).onclick=function(){0<document.getElementById(a.id+"-day-num-"+e).innerHTML.length&&(t.changeDateTo(document.getElementById(a.id+"-day-num-"+e).innerHTML,e),n())}},Organizer.prototype.showEvents=function(e){e=void 0===e?this.data:e;var t=this.calendar.date;try{this.list(e[t.getFullYear()][t.getMonth()+1][t.getDate()])}catch(e){this.showPlaceholder()}},Organizer.prototype.showPlaceholder=function(e){document.getElementById(this.id+"-list").innerHTML=this.calendar.placeholder},Organizer.prototype.indicateEvents=function(e){e=void 0===e?this.data:e;var t=this.calendar.date;if(this.calendar.indicator){var n=document.getElementsByClassName(this.calendar.id+" day listed");try{var a,i=e[t.getFullYear()][t.getMonth()+1];for(a in i)0<i[a].length&&(n[a-1].className+=" active")}catch(e){}}this.update()},Organizer.prototype.onMonthChange=function(e){e()},Organizer.prototype.setOnClickListener=function(e,t,n){var a=this.calendar.id,i=this.id;t=t||function(){},n=n||function(){};var d=this;switch(e){case"days-blocks":for(e=1;42>=e;e++)d.setupBlock(e,d,t);break;case"day-slider":document.getElementById(i+"-day-back").onclick=function(){d.back("day"),t()},document.getElementById(i+"-day-next").onclick=function(){d.next("day"),n()};break;case"month-slider":document.getElementById(a+"-month-back").onclick=function(){d.back("month"),t()},document.getElementById(a+"-month-next").onclick=function(){d.next("month"),n()};break;case"year-slider":document.getElementById(a+"-year-back").onclick=function(){d.back("year"),t()},document.getElementById(a+"-year-next").onclick=function(){d.next("year"),n()}}},Organizer.prototype={constructor:Organizer,back:function(e){var t,n=this.calendar.date,a=new Date(11<n.getMonth()+1?n.getFullYear()+1:n.getFullYear(),12<n.getMonth()+1?0:n.getMonth()+1,0).getDate();(new Date(0>n.getMonth()?n.getFullYear()-1:n.getFullYear(),0>n.getMonth()?11:n.getMonth(),0).getDate(),"day"==e)?(1!=n.getDate()?(this.changeDateTo(n.getDate()-1),this.update()):(this.calendar.back("month"),this.changeDateTo(a),(t=this).onMonthChange(function(){t.indicateEvents()})),document.getElementById(this.calendar.id+"-day-radio-"+(this.calendar.initday+n.getDate())).checked=!0):(this.calendar.back(e),(t=this).onMonthChange(function(){t.indicateEvents()}))},next:function(e){var t,n=this.calendar.date,a=new Date(11<n.getMonth()+1?n.getFullYear()+1:n.getFullYear(),12<n.getMonth()+1?0:n.getMonth()+1,0).getDate();(new Date(11<n.getMonth()+2?n.getFullYear()+1:n.getFullYear(),12<n.getMonth()+2?0:n.getMonth()+2,0).getDate(),"day"==e)?(n.getDate()!=a?(n.setDate(n.getDate()+1),this.update()):(this.calendar.next("month"),n.setDate(1),(t=this).onMonthChange(function(){t.indicateEvents()})),document.getElementById(this.calendar.id+"-day-radio-"+(this.calendar.initday+n.getDate())).checked=!0):(this.calendar.next(e),(t=this).onMonthChange(function(){t.indicateEvents()}))},changeDateTo:function(e,t){var n=this.calendar.changeDateTo(e,t),a=this;setTimeout(function(){n?a.onMonthChange(function(){a.indicateEvents()}):a.update()},1)}};
