class Calendar{constructor(e,t,n,a,d){this.id=e,this.size=t,this.labelSettings=n,this.colors=a,this.initday=0,d=d||{},this.indicator=!0,null!=d.indicator&&(this.indicator=d.indicator);const i=document.createElement("LI");i.className="list-placeholder",i.appendChild(document.createTextNode("No events on this day")),this.placeholder=i.outerHTML,null!=d.placeholder&&(this.placeholder=d.placeholder);let l=["January","February","March","April","May","June","July","August","September","October","November","December"];null!=d.months&&12==d.months.length&&(l=d.months);let s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];null!=d.days&&7==d.days.length&&(s=d.days),this.months=l,this.label=[],this.labels=[];for(var o=0;o<7;o++)this.label.push(s[s.indexOf(n[0])+this.label.length>=s.length?Math.abs(s.length-(s.indexOf(n[0])+this.label.length)):s.indexOf(n[0])+this.label.length]);for(o=0;o<7;o++)this.labels.push(this.label[o].substring(0,n[1]>3?3:n[1]));this.date=new Date,this.today=new Date,this.draw(),this.update(),this.setOnClickListener("days-blocks"),this.setOnClickListener("month-slider"),this.setOnClickListener("year-slider")}draw(){const e=`<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="${this.colors[3]}" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"></path></svg>`,t=`<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="${this.colors[3]}" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"></path></svg>`,n=document.createElement("DIV");n.className=`calendar ${this.size}`,document.getElementById(this.id).appendChild(n.cloneNode(!0));const a=[],d=["year","month","labels","days"];for(var i=0;i<d.length;i++){var l,s;if(a[i]=document.createElement("DIV"),a[i].className=d[i],"days"!=d[i])if("month"!=d[i]){if(a[i].style.backgroundColor=this.colors[1],a[i].style.color=this.colors[3],"labels"!=d[i])(l=document.createElement("DIV")).id=`${this.id}-year-back`,l.insertAdjacentHTML("beforeend",e),a[i].appendChild(l.cloneNode(!0)),(r=document.createElement("SPAN")).id=`${this.id}-${d[i]}`,a[i].appendChild(r.cloneNode(!0)),(s=document.createElement("DIV")).id=`${this.id}-year-next`,s.insertAdjacentHTML("beforeend",t),a[i].appendChild(s.cloneNode(!0))}else a[i].style.backgroundColor=this.colors[0],a[i].style.color=this.colors[2],(l=document.createElement("DIV")).id=`${this.id}-month-back`,l.insertAdjacentHTML("beforeend",e),a[i].appendChild(l.cloneNode(!0)),(r=document.createElement("SPAN")).id=`${this.id}-${d[i]}`,a[i].appendChild(r.cloneNode(!0)),(s=document.createElement("DIV")).id=`${this.id}-month-next`,s.insertAdjacentHTML("beforeend",t),a[i].appendChild(s.cloneNode(!0))}for(i=0;i<this.labels.length;i++){const e=document.createElement("SPAN");e.id=`${this.id}-label-${i+1}`,e.appendChild(document.createTextNode(this.labels[i]).cloneNode(!0)),a[2].appendChild(e.cloneNode(!0))}const o=[],h=[],c=[];for(i=0;i<6;i++)o[i]=document.createElement("DIV"),o[i].className="row";for(let e=0,t=0;e<42;e++){var r;c[e]=document.createElement("INPUT"),c[e].className="day-radios",c[e].type="radio",c[e].name=`${this.id}-day-radios`,c[e].id=`${this.id}-day-radio-${e+1}`,h[e]=document.createElement("LABEL"),h[e].className="day",h[e].htmlFor=`${this.id}-day-radio-${e+1}`,h[e].id=`${this.id}-day-${e+1}`,(r=document.createElement("SPAN")).id=`${this.id}-day-num-${e+1}`,h[e].appendChild(r.cloneNode(!0)),o[t].appendChild(c[e].cloneNode(!0)),o[t].appendChild(h[e].cloneNode(!0)),(e+1)%7==0&&t++}for(i=0;i<6;i++)a[3].appendChild(o[i].cloneNode(!0));for(i=0;i<a.length;i++)n.appendChild(a[i].cloneNode(!0));document.getElementById(this.id).innerHTML=`<style>.day.active::before { background-color: ${this.colors[1]}; } .day.today > span { border-color: ${this.colors[1]} !important; }</style>`,document.getElementById(this.id).appendChild(n.cloneNode(!0))}update(){document.getElementById(`${this.id}-year`).innerHTML=this.date.getFullYear(),document.getElementById(`${this.id}-month`).innerHTML=this.months[this.date.getMonth()];for(var e=1;e<=42;e++)document.getElementById(`${this.id}-day-num-${e}`).innerHTML="",document.getElementById(`${this.id}-day-${e}`).className=`${this.id} day listed`;const t=new Date(this.date.getFullYear(),this.date.getMonth(),1).getDay(),n=new Date(this.date.getMonth()+1>11?this.date.getFullYear()+1:this.date.getFullYear(),this.date.getMonth()+1>12?0:this.date.getMonth()+1,0).getDate(),a=new Date(this.date.getMonth()<0?this.date.getFullYear()-1:this.date.getFullYear(),this.date.getMonth()<0?11:this.date.getMonth(),0).getDate();this.initday=this.label.indexOf(this.label[t]);e=0;for(var d=a;e<this.label.indexOf(this.label[t]);e++,d--)document.getElementById(`${this.id}-day-num-${this.label.indexOf(this.label[t])-e}`).innerHTML=d,document.getElementById(`${this.id}-day-${this.label.indexOf(this.label[t])-e}`).className=`${this.id} day diluted`;for(e=1;e<=n;e++)document.getElementById(`${this.id}-day-num-${this.label.indexOf(this.label[t])+e}`).innerHTML=e,e==this.date.getDate()&&(document.getElementById(`${this.id}-day-radio-${this.label.indexOf(this.label[t])+e}`).checked=!0),this.date.getMonth()==this.today.getMonth()&&e==this.today.getDate()&&(document.getElementById(`${this.id}-day-${this.label.indexOf(this.label[t])+e}`).className+=" today");for(e=n+1,d=1;this.label.indexOf(this.label[t])+e<=42;e++,d++)document.getElementById(`${this.id}-day-num-${this.label.indexOf(this.label[t])+e}`).innerHTML=d,document.getElementById(`${this.id}-day-${this.label.indexOf(this.label[t])+e}`).className=`${this.id} day diluted`}setupBlock(e,t,n){document.getElementById(`${t.id}-day-${e}`).onclick=(()=>{document.getElementById(`${t.id}-day-num-${e}`).innerHTML.length>0&&(t.changeDateTo(document.getElementById(`${t.id}-day-num-${e}`).innerHTML,e),n())})}setOnClickListener(e,t,n){const a=this.id;t=t||(()=>{}),n=n||(()=>{});const d=this;switch(e){case"days-blocks":for(let e=1;e<=42;e++)d.setupBlock(e,d,t);break;case"month-slider":document.getElementById(`${a}-month-back`).onclick=(()=>{d.back("month"),t()}),document.getElementById(`${a}-month-next`).onclick=(()=>{d.next("month"),n()});break;case"year-slider":document.getElementById(`${a}-year-back`).onclick=(()=>{d.back("year"),t()}),document.getElementById(`${a}-year-next`).onclick=(()=>{d.next("year"),n()})}}}Calendar.prototype={constructor:Calendar,back:function(e){const t=this.date,n=(new Date(t.getMonth()+1>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+1>12?0:t.getMonth()+1,0).getDate(),new Date(t.getMonth()<0?t.getFullYear()-1:t.getFullYear(),t.getMonth()<0?11:t.getMonth(),0).getDate());"month"==e?(t.getDate()>n&&this.changeDateTo(n),t.getMonth()>0?t.setMonth(t.getMonth()-1):(t.setMonth(11),t.setFullYear(t.getFullYear()-1))):"year"==e&&t.setFullYear(t.getFullYear()-1),this.update()},next:function(e){const t=this.date,n=(new Date(t.getMonth()+1>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+1>12?0:t.getMonth()+1,0).getDate(),new Date(t.getMonth()+2>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+2>12?0:t.getMonth()+2,0).getDate());"month"==e?(t.getDate()>n&&this.changeDateTo(n),11!=t.getMonth()?t.setMonth(t.getMonth()+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))):t.setFullYear(t.getFullYear()+1),this.update()},changeDateTo:function(e,t){if(t>=31&&e<=11||t<=6&&e>=8){t>=31&&e<=11?this.next("month"):t<=6&&e>=8&&this.back("month"),this.date.setDate(e);const n=this;return setTimeout(()=>{n.update()},1),!0}this.date.setDate(e)}};class Organizer{constructor(e,t,n){this.id=e,this.calendar=t,this.data=n||{},this.draw();const a=this;a.onMonthChange(()=>{a.indicateEvents()}),this.setOnClickListener("days-blocks"),this.setOnClickListener("day-slider"),this.setOnClickListener("month-slider"),this.setOnClickListener("year-slider")}draw(){const e=`<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="${this.calendar.colors[3]}" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"></path></svg>`,t=`<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="${this.calendar.colors[3]}" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"></path></svg>`,n=document.createElement("DIV");n.className=`events ${this.calendar.size}`;const a=document.createElement("DIV");a.className="date",a.style.backgroundColor=this.calendar.colors[1],a.style.color=this.calendar.colors[3];const d=document.createElement("DIV");d.id=`${this.id}-day-back`,d.insertAdjacentHTML("beforeend",e),a.appendChild(d.cloneNode(!0));const i=document.createElement("SPAN");i.id=`${this.id}-date`,a.appendChild(i.cloneNode(!0));const l=document.createElement("DIV");l.id=`${this.id}-day-next`,l.insertAdjacentHTML("beforeend",t),a.appendChild(l.cloneNode(!0));const s=document.createElement("DIV");s.className="rows";const o=document.createElement("OL");o.className="list",o.id=`${this.id}-list`,s.appendChild(o.cloneNode(!0)),n.appendChild(a.cloneNode(!0)),n.appendChild(s.cloneNode(!0)),document.getElementById(this.id).appendChild(n.cloneNode(!0))}update(){document.getElementById(`${this.id}-date`).innerHTML=`${this.calendar.months[this.calendar.date.getMonth()]} ${this.calendar.date.getDate()}, ${this.calendar.date.getFullYear()}`,document.getElementById(`${this.id}-list`).innerHTML="",this.showEvents()}list(e){document.getElementById(`${this.id}-list`).innerHTML="";const t=document.createElement("UL");for(let n=0;n<e.length;n++){const a=document.createElement("LI");a.id=`${this.id}-list-item-${n}`;const d=document.createElement("DIV"),i=document.createElement("SPAN");i.id=`${this.id}-list-item-${n}-time`,i.class=`${this.id} time`,i.appendChild(document.createTextNode(`${e[n].startTime} - ${e[n].endTime}`)),d.appendChild(i);const l=document.createElement("P");l.id=`${this.id}-list-item-${n}-text`,l.appendChild(document.createTextNode(e[n].text)),a.appendChild(d),a.appendChild(l),t.appendChild(a)}document.getElementById(`${this.id}-list`).innerHTML=t.innerHTML,0==e.length&&this.showPlaceholder()}setupBlock(e,t,n){const a=t.calendar;document.getElementById(`${a.id}-day-${e}`).onclick=(()=>{document.getElementById(`${a.id}-day-num-${e}`).innerHTML.length>0&&(t.changeDateTo(document.getElementById(`${a.id}-day-num-${e}`).innerHTML,e),n())})}showEvents(e=this.data){const t=this.calendar.date;try{this.list(e[t.getFullYear()][t.getMonth()+1][t.getDate()])}catch(e){this.showPlaceholder()}}showPlaceholder(e){document.getElementById(`${this.id}-list`).innerHTML=this.calendar.placeholder}indicateEvents(e=this.data){const t=this.calendar.date;if(this.calendar.indicator){const n=document.getElementsByClassName(`${this.calendar.id} day listed`);try{const a=e[t.getFullYear()][t.getMonth()+1];for(const e in a)a[e].length>0&&(n[e-1].className+=" active")}catch(e){}}this.update()}onMonthChange(e){e()}setOnClickListener(e,t,n){const a=this.calendar.id,d=this.id;t=t||(()=>{}),n=n||(()=>{});const i=this;switch(e){case"days-blocks":for(let e=1;e<=42;e++)i.setupBlock(e,i,t);break;case"day-slider":document.getElementById(`${d}-day-back`).onclick=(()=>{i.back("day"),t()}),document.getElementById(`${d}-day-next`).onclick=(()=>{i.next("day"),n()});break;case"month-slider":document.getElementById(`${a}-month-back`).onclick=(()=>{i.back("month"),t()}),document.getElementById(`${a}-month-next`).onclick=(()=>{i.next("month"),n()});break;case"year-slider":document.getElementById(`${a}-year-back`).onclick=(()=>{i.back("year"),t()}),document.getElementById(`${a}-year-next`).onclick=(()=>{i.next("year"),n()})}}}Organizer.prototype={constructor:Organizer,back:function(e){const t=this.calendar.date,n=new Date(t.getMonth()+1>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+1>12?0:t.getMonth()+1,0).getDate();new Date(t.getMonth()<0?t.getFullYear()-1:t.getFullYear(),t.getMonth()<0?11:t.getMonth(),0).getDate();if("day"==e){if(1!=t.getDate())this.changeDateTo(t.getDate()-1),this.update();else this.calendar.back("month"),this.changeDateTo(n),(a=this).onMonthChange(()=>{a.indicateEvents()});document.getElementById(`${this.calendar.id}-day-radio-${this.calendar.initday+t.getDate()}`).checked=!0}else{var a;this.calendar.back(e),(a=this).onMonthChange(()=>{a.indicateEvents()})}},next:function(e){const t=this.calendar.date,n=new Date(t.getMonth()+1>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+1>12?0:t.getMonth()+1,0).getDate();new Date(t.getMonth()+2>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+2>12?0:t.getMonth()+2,0).getDate();if("day"==e){if(t.getDate()!=n)t.setDate(t.getDate()+1),this.update();else this.calendar.next("month"),t.setDate(1),(a=this).onMonthChange(()=>{a.indicateEvents()});document.getElementById(`${this.calendar.id}-day-radio-${this.calendar.initday+t.getDate()}`).checked=!0}else{var a;this.calendar.next(e),(a=this).onMonthChange(()=>{a.indicateEvents()})}},changeDateTo:function(e,t){const n=this.calendar.changeDateTo(e,t),a=this;setTimeout(()=>{n?a.onMonthChange(()=>{a.indicateEvents()}):a.update()},1)}};
